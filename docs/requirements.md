# 家庭菜单 Web App 需求文档

## 项目概述

### 基本信息
- **项目名称**：家庭菜单 Web App
- **开发周期**：1个月
- **目标用户**：面向大众的家庭用户
- **项目规模**：中型项目

### 技术栈 
- **前端框架**：Next.js 
- **CSS框架**： 
  - Tailwind CSS 
  - Shadcn/UI 
- **后端框架**：Hono.js (运行于 Cloudflare Workers)
- **API协议**：RESTful API

### 关键要求
1. **性能要求**：高性能，快速响应
2. **SEO优化**：需要良好的搜索引擎优化
3. **移动端适配**：以移动端为重点，确保良好的移动端体验
4. **开发团队**：团队具有Go语言背景，无前端开发经验

## 核心功能模块

### 1. 用户管理 [进行中 ]
- 用户登录与注册（邮箱/手机号） 
- 家庭组管理
  - 创建和加入家庭组
  - 邀请码系统
  - 一次性访客口令
- 个人资料管理
  - 基础信息维护
  - 饮食偏好设置

### 2. 菜单管理 [进行中 ]
- 菜单创建与编辑
  - 按类别管理（早餐、午餐、晚餐等）
  - 时间规划（日/周视图）
- 菜单查看与互动
  - 详细菜谱查看
  - 家庭成员互动功能
- 历史菜单管理
- 导出功能（PDF/图片）

### 3. 菜品管理 [已完成 ]
- 菜品库维护 
  - 添加/编辑菜品信息 
    - 基本信息（名称、描述、分类） 
    - 烹饪信息（准备时间、烹饪时间、难度、份量） 
    - 食材清单（名称、数量、单位） 
    - 烹饪步骤 
  - 菜谱详情管理 
- 分类与搜索 
  - 按分类筛选（荤菜、素菜、汤羹、主食、小吃） 
  - 按难度筛选（简单、中等、困难） 
- 食材关联 
  - 食材名称 
  - 数量单位 
  - 步骤顺序 
- 标签系统 
  - 自定义标签 
  - 标签管理 
- 历史记录追踪 
  - 创建时间 
  - 更新时间 
  - 创建者信息 
- 菜品共享 
  - 家庭组内共享 
  - 跨家庭组共享 
  - 共享类型（复制/链接） 

### 4. 购物清单 [进行中 ]
- 自动生成清单
- 共享与协作功能
- 状态追踪
- 历史记录管理
- 导出功能

### 5. 食材管理 [未开始 ]
- 库存追踪
- 过期提醒
- 库存预警
- 使用记录

### 6. 饮食健康追踪 [未开始 ]
- 营养统计
- 健康目标设定
- 饮食建议
- 数据可视化

### 7. 聚餐支持 [未开始 ]
- 聚餐计划管理
- 任务分配
- 邀请系统
- 反馈收集

### 8. 数据分析 [未开始 ]
- 营养分析
- 趋势追踪
- 健康报告
- 数据可视化

## 技术实现重点

### 前端开发
1. **响应式设计** 
   - 移动优先的UI设计 
   - 流畅的交互体验 
   - 适配不同屏幕尺寸 

2. **性能优化** [进行中 ]
   - 图片懒加载
   - 组件按需加载 
   - 缓存策略

3. **SEO优化** 
   - 服务端渲染 
   - Meta标签优化 
   - 结构化数据 

### 后端开发
1. **API设计** [进行中 ]
   - RESTful规范
   - 接口版本控制
   - 错误处理机制

2. **数据处理** [进行中 ]
   - 数据验证
   - 并发控制
   - 缓存策略

3. **安全性** [进行中 ]
   - 身份认证 
   - 数据加密
   - 访问控制

## 项目架构

### 技术栈
- **框架**: Next.js 15
- **语言**: TypeScript
- **样式**: TailwindCSS
- **状态管理**: Zustand
<!-- - **数据获取**: TanStack Query (React Query) -->
- **UI组件**: Shadcn/UI (基于Radix UI的预设组件库)
- **API层**: Hono
- **数据库**: SQLite (使用 Drizzle ORM)
- **部署**: Cloudflare Pages
- 字段命名方式 驼峰式

### 项目结构
```
family-menu/
├── src/                      # 源代码目录
│   ├── app/                  # Next.js 应用页面
│   ├── components/           # React组件
│   ├── contexts/             # React上下文
│   ├── lib/                  # 工具函数和配置
│   ├── services/             # 服务层
│   ├── stores/              # Zustand状态管理
│   └── types/               # TypeScript类型定义
├── functions/               # Cloudflare Functions
├── migrations/              # 数据库迁移文件
├── docs/                    # 项目文档
└── public/                  # 静态资源
```

### 主要依赖
- `@hono/zod-validator`: API请求验证
<!-- - `@libsql/client`: SQLite客户端 -->
- `Shadcn/UI`: Shadcn/UI的底层组件
<!-- - `@tanstack/react-query`: 数据获取和缓存 -->
- `drizzle-orm`: 数据库ORM
- `zustand`: 状态管理

### 部署
项目使用Cloudflare Pages进行部署，支持以下命令：
- `npm run dev`: 本地开发
- `npm run pages:dev`: 使用Cloudflare Workers本地开发
- `npm run pages:deploy`: 部署到Cloudflare Pages

### 数据库
使用SQLite数据库，通过Drizzle ORM进行管理：
- 数据库schema位于 `functions/db/schema.ts`
- 迁移文件存放在 `functions/migrations/` 目录

## 开发优先级

### 第一阶段（周1-2）[进行中 ]
- 用户系统搭建 
- 基础菜单管理 
- 菜品管理核心功能 

### 第二阶段（周2-3）[未开始 ]
- 购物清单功能
- 食材管理
- 健康追踪基础功能

### 第三阶段（周3-4）[未开始 ]
- 聚餐支持功能
- 数据分析与可视化
- UI优化与移动端适配
